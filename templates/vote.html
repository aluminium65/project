<!DOCTYPE html>
<html>
<head>
    <title>Vote</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <a href="{{ url_for('admin_login_page') }}" class="admin-btn">Admin Page</a>
    <h1>Voting Form</h1>
   <form method="post">
    {% for num, candidates in rows.items() %}
    <div class="row">
        <h2>Row {{ num }} - Vote Limit: 1</h2>
        {% for c in candidates %}
            <label style="margin: 20px;">
                <input type="radio" name="row{{ num }}" value="{{ c.id }}" style="display:none;">
                <img src="{{ url_for('static', filename=c.symbol_path) }}"
                     onclick="selectCandidate(this)"
                     class="symbol">
            </label>
        {% endfor %}
    </div>
    {% endfor %}
    <button type="submit">Submit Vote</button>
</form>

<style>
.symbol {
    width: 150px;
    height: 150px;
    border: 3px solid transparent;
    cursor: pointer;
    border-radius: 10px;
}
.symbol.selected {
    border-color: green;
}
</style>

<script>
function selectCandidate(img) {
    // Unselect all in the same row
    const rowDiv = img.closest('.row');
    rowDiv.querySelectorAll('.symbol').forEach(i => i.classList.remove('selected'));
    img.classList.add('selected');

    // Check its hidden input
    const input = img.previousElementSibling;
    input.checked = true;
}
</script>

</body>
</html>
